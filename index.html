<html>
    <head>
        <meta name="theme-color" content="#ffffff">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">

        <link rel="manifest" href="https://moeelias.com/static/site.webmanifest">
        <link rel="mask-icon" href="https://moeelias.com/static/safari-pinned-tab.svg" color="#5bbad5">
        <link rel="apple-touch-icon" sizes="180x180" href="https://moeelias.com/static/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://moeelias.com/static/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://moeelias.com/static/favicon-16x16.png">

        <title>
            ALL I SEE
        </title>
        <style>
            @font-face {
                font-family: mochi;
                src: url("./font/MochiyPopOne-Regular.ttf")
            }

            @font-face {
                font-family: curse;
                src: url("./font/MonsieurLaDoulaise-Regular.ttf")
            }

            body {
                margin: 0;
                display: flex;
                min-height: 100%;
                background-size: 80%;
                flex-direction: column;
                justify-content: space-between;
                background-color: #000000;
                background-position: center; 
                background-attachment: fixed;
                background-repeat: no-repeat;
                background-image: url("./static/bg.jpg");
            }
            
            a {
                color: #9CFF89;
                font-size: 1.25em;
                text-decoration: none;
                text-transform: uppercase;
                font-family: "mochi", Arial;
            }

            a:hover {
                color: #7ccc6d;
            }

            #header {
                width: 100%;
                display: flex;
                padding-top: 16px;
                align-self: center;
                justify-content: space-around;
            }

            #footer {
                left: 0;
                bottom: 0; 
                width: 90%;
                padding: 16px;
                display: flex;
                margin-top: 16px;
                position: absolute;
                z-index: 0;
                justify-content: right;
            }

            #title-btn {
                color: white;
                font-size: 6em;
                text-align: center;
                text-decoration: none;
                font-family: "curse", Arial;
            }

            #prints-gallery {
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: none;
                overflow: hidden;
                position: absolute;
            }

            #prints-gallery-inner {
                display: flex;
                padding: 16px;
                flex-wrap: wrap;
                overflow-x: hidden;
                overflow-y: scroll;
                justify-content: space-evenly;
            }

            .gallery-image {
                width: auto;
                max-height: 300px;
                border: 8px solid black;
                transition: transform .1s;
            }

            .gallery-image:hover {
                transform: scale(1.2);
            }

            .gallery-image-container {
                padding: 16px;
                display: inline-block;
            }

            #lightbox {
                top: 0;
                left: 0;
                z-index: 1;
                width: 100%;
                height: 100%;
                display: none;
                overflow: auto;
                position: fixed;
                padding-top: 60px;
                background-color: black;
            }

            #lightbox-content {
                padding: 0;
                width: 60%;
                margin: auto;
                max-width: 1200px;
                position: relative;
                background-color: #fffbd2;
            }

            .close {
                top: 10px;
                right: 25px;
                color: white;
                font-size: 35px;
                font-weight: bold;
                position: absolute;
            }

            .close:hover,.close:focus {
                color: #999;
                cursor: pointer;
                text-decoration: none;
            }
        </style>
    </head>
    <body>
        <div id="prints-gallery">
            <div id="prints-gallery-inner"></div>
        </div>

        <div id="lightbox">
            <span class="close cursor" onclick="closeModal()">&times;</span>
            <div id="lightbox-content"></div>
        </div>

        <div id="header">
            <a id="prints-btn" href="javascript:void(0);">Prints</a>
            <a href="mailto: allthese.isms@gmail.com?subject=Hello">Contact</a>
        </div>

        <div id="footer">
            <span id="title-btn">All i see. is Moe</span>
        </div>
    </body>

    <script>
        const NUM_PRINTS = 22;

        document.getElementById("prints-btn").addEventListener("click", () => {
            let imgIds = [];
            let imgElStrs = [];

            const printsGalleryInner = document.getElementById("prints-gallery-inner");
            const printsGallery = document.getElementById("prints-gallery");
            const printsGalStyle = getComputedStyle(printsGallery);

            if (printsGalStyle.display == 'none') {
                printsGallery.style.display = 'flex';
            }

            for (let i = 1; i <= NUM_PRINTS; i++) {
                imgIds.push(i);
            }

            shuffleArray(imgIds);

            for (let i of imgIds) {
                imgElStrs.push(`
                    <div class="gallery-image-container">
                        <img data-id="${i}" class="gallery-image" src="prints/${i}.jpg" onclick="openModal();" style="cursor: pointer;" />
                    </div>
                `);
            }

            document.getElementById("footer").style.display = "none";
            document.getElementById("header").style.display = "none";

            printsGalleryInner.innerHTML = imgElStrs.join("\n");
        });

        document.getElementById("prints-gallery").addEventListener("click", e => {
            if (e.target.classList.contains('gallery-image')) {
                return;
            }
            const printsGallery = document.getElementById("prints-gallery");
            printsGallery.style.display = 'none';

            document.getElementById("footer").style.display = "flex";
            document.getElementById("header").style.display = "flex";
        });
       
        document.addEventListener("click", e => {
            if (e && e.target.classList.contains('gallery-image')) {
                let img = document.createElement('img');
                img.style.width = "100%";
                img.src = `prints/${e.target.dataset.id}.jpg`;

                document.getElementById('lightbox-content').appendChild(img);

                let txt = document.createElement('a');
                txt.href = `
                    mailto: allthese.isms@gmail.com?subject=ALL&nbsp;I&nbsp;SEE&nbsp;is&nbsp;Moe - Print request - print #${e.target.dataset.id}
                `;
                txt.innerHTML = "Request";

                document.getElementById('lightbox-content').prepend(txt);
            } else if (e && e.target.id == 'lightbox') {
                closeModal();
            }
        });

        function openModal() {
            document.getElementById("lightbox").style.display = "block";
        }

        function closeModal() {
            document.getElementById("lightbox").style.display = "none";
            document.getElementById("lightbox-content").innerHTML = "";
        }

        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
    </script>

</html>
